<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GemAd - Earn Telegram Stars!</title>
  <link rel="stylesheet" href="/reset.css">
  <link rel="stylesheet" href="/styles.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">
  <style>
    .page { display: none; }
    .page.active { display: flex; }

  </style>
</head>
<body>
  <header>
  <div class="header__content">
    <div class="user-info">
      <div class="logo info-item">
     
        <img class="user-icon" id="avatar" src="" alt="avatar">
      </div>
      <div class="user-stat">

        <div class="user-name info-item" id="name"></div>

        <div class="stars-earned info-item" id="stars-earned">Earned: 0 ‚≠ê</div>
      </div>
    </div>
    <div class="user-balance info-item">

       <p class="stars-balance"> <span id="stars-balance">0 ‚≠ê</span></p>
    </div>
  </div>
</header>
  <main>
    <!-- Page 1 -->
    <section id="page-ad" class="page active">
      <div class="section-header">
        <div class="section-header__content">
          <h1 class="section__title">All available ads: </h1>
          <div class="search-container">
            <input id="searchInput" type="text" placeholder="Search by hashtag... (#fun, #crypto)" autocomplete="off"/>
            <ul id="suggestionsList" class="suggestions"></ul>
          </div>
          <p id="noResults" class="no-results">Nothing found üòï Try another hashtag</p>
          <div class="section-header__blocks">

            <!-- block -->
            <div class="ad-block" data-tag="#food #syrok #recommended">
              <div class="ad-block__head">
                <img class="ad-block__img" src="images/nazvakanalu.jpg" alt="item">
              </div>
              <div class="ad-block__bottom">
                
                  <div class="ad-block__title">Channel name</div>
                
                <div class="ad-block__description">
                  <div class="ad-block__desc block-bottom__item">Ishov 5 den bez sush</div>
                  <div class="ad-block__hashtags">
                  <div class="hashtag-recommended">#recomended</div>
                  <div class="ad-block__hashtag">#food</div> 
                  <div class="ad-block__hashtag">#syrok</div>
                  
                  </div>
                    <a href="https://t.me/miy_bloh" class="ad-link ad-link__mobile block-bottom__item">Subscribe 14 ‚≠ê</a>
                </div>
              </div>
            </div>




          
            <!-- block -->
            <div class="ad-block" data-tag="#father #business #pavel">
              <div class="ad-block__head">
                <img class="ad-block__img" src="images/durov.jpg" alt="item">
              </div>
              <div class="ad-block__bottom">
                
                  <div class="ad-block__title">Pavel Durov</div>
                
                <div class="ad-block__description">
                  <div class="ad-block__desc block-bottom__item">Official Telegram of Pavel Durov</div>
                  <div class="ad-block__hashtags">
                  <div class="ad-block__hashtag">#business</div> 
                  <div class="ad-block__hashtag">#father</div>
                  <div class="ad-block__hashtag">#pavel</div>
                  </div>
                    <a href="https://t.me/durov" class="ad-link ad-link__mobile block-bottom__item">Subscribe 15‚≠ê</a>
                </div>
              </div>
            </div>
            <!-- block -->
            <div class="ad-block" data-tag="#dev #chat-bots #devtools">
              <div class="ad-block__head">
                <video autoplay muted loop playsinline class="ad-block__img" src="images/photo_2025-10-04_22-09-30.mp4"></video>
              </div>
              <div class="ad-block__bottom">
                
                  <div class="ad-block__title">Sonata Studio</div>
                
                <div class="ad-block__description">
                  <div class="ad-block__desc block-bottom__item">Create your own chat-bot right now</div>
                  <div class="ad-block__hashtags">
                  <div class="ad-block__hashtag">#dev</div> 
                  <div class="ad-block__hashtag">#chat-bots</div>
                  <div class="ad-block__hashtag">#dev-tools</div>
                  </div>
                    <a href="https://t.me/SonataStudio" class="ad-link ad-link__mobile block-bottom__item">Subscribe 15‚≠ê</a>
                </div>
              </div>
            </div>
            <!-- block -->
            <div class="ad-block " data-tag="#fun #monkeys #bros">
              <div class="ad-block__head">
                <img class="ad-block__img" src="images/monkeys.jpg" alt="item">
              </div>
              <div class="ad-block__bottom">
                
                  <div class="ad-block__title">Bibizyhani</div>
                
                <div class="ad-block__description">
                  <div class="ad-block__desc block-bottom__item">Monkeyss</div>
                  <div class="ad-block__hashtags">
                  <div class="ad-block__hashtag">#monkeys</div> 
                  <div class="ad-block__hashtag">#fun</div>
                  <div class="ad-block__hashtag">#bros</div>
                  </div>
                    <a href="https://t.me/bibizyankimonk" class="ad-link ad-link__mobile block-bottom__item">Subscribe 1500‚≠ê</a>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </section>

    <!-- cases -->
    <section id="page-cases" class="page">
  <div class="section-cases">
    <div class="section-cases__content">
      <h1 class="section__title">Cases: </h1>
      <div class="section-cases__blocks"> 

        <a class="case-block" href="#" onclick="showPage('case-durov', event)">
          <div class="case-block__head">
            <img class="case-block__img" src="images/durov.jpg" alt="item">
          </div>
          <div class="case-block__bottom">
            <h2 class="case-block__title">Durov's Case</h2>
            <div class="case-block__desc">Try your luck and win stars!</div>
            <div class="case-block__price">Price: 200 ‚≠ê</div>
          </div>
        </a>

      </div>

      <a class="back-button" href="#" onclick="showPage('page-ad', event)">
        <img style="width: 30px; height: 30px;" src="images/left-arrow.svg" alt="back">
      </a>
    </div>
  </div>
</section>


    <section id="case-durov" class="page">
      <div class="case-durov">
      <h1 class="section__title">Durov's Case</h1>
      <div class="viewport" id="viewport">
    <div class="strip" id="strip"></div>
    <div class="indicator" aria-hidden="true"></div>
  </div>

  <button class="spin-btn" id="spin">Spin 200 ‚≠ê</button>
  <div id="result"></div>
      <a class="back-button" href="#" onclick="showPage('page-cases', event)"> <img style="width: 30px; height: 30px;" src="images/left-arrow.svg" alt="back"> </a>
      
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer">
      <ul class="footer-nav">
        <li class="footer-nav__item active">
  <a class="ad-navigation" href="#" onclick="showPage('page-ad', event)">Ad <img class="svg" src="images/ad.svg" alt="ad-navigation"></a>
</li>
<li class="footer-nav__item">
  <a class="ad-navigation" href="#" onclick="showPage('page-cases', event)">Cases <img class="svg" src="images/case.svg" alt="case-nav"> </a>
</li>
      </ul>
    </div>
  </footer>

  <!-- tg + nav -->
   <script src="spin.js"></script>
<script>
  const tg = window.Telegram.WebApp;
  tg.expand();

  // nav
  window.showPage = function(pageId, event) {
    if (event) event.preventDefault();

    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    const page = document.getElementById(pageId);
    if (page) page.classList.add("active");

    document.querySelectorAll(".footer-nav__item").forEach(i => i.classList.remove("active"));
    const link = document.querySelector(`.footer-nav__item a[onclick*="${pageId}"]`);
    if (link) link.parentElement.classList.add("active");

    history.pushState({ page: pageId }, "", `#${pageId}`);
  }


  window.addEventListener("popstate", e => {
    const page = e.state?.page || "page-ad";
    window.showPage(page);
  });

</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const tg = window.Telegram?.WebApp || null;
  // —ç–ª–µ–º–µ–Ω—Ç—ã
  const searchInput = document.getElementById('searchInput');
  const suggestionsList = document.getElementById('suggestionsList');
  const adBlocks = document.querySelectorAll('.ad-block');
  const noResults = document.getElementById('noResults');
  const footer = document.querySelector('footer');
  const main = document.querySelector('main');

  // –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è —Ñ—É—Ç–µ—Ä–∞
  if (footer) {
    footer.style.position = 'fixed';
    footer.style.left = '0';
    footer.style.right = '0';
    footer.style.bottom = '0';
    footer.style.zIndex = '100';
    footer.style.transition = 'transform 180ms ease';
    footer.style.willChange = 'transform';
  }
  if (main) {
    main.style.transition = 'padding-bottom 180ms ease';
    main.style.paddingBottom = `${footer ? footer.offsetHeight : 70}px`;
  }

  // --- —Å–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —Ö—ç—à—Ç–µ–≥–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ–º data-tag –∫–∞–∫ —É —Ç–µ–±—è)
  let hashtags = [];
  adBlocks.forEach(block => {
    const tagsAttr = (block.dataset.tag || '').trim();
    if (!tagsAttr) return;
    const tags = tagsAttr.split(/\s+/).map(t => t.trim()).filter(t => t.startsWith('#') && t.length > 1);
    hashtags.push(...tags);
  });
  hashtags = Array.from(new Set(hashtags));

  // --- —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ + –ø–æ–¥—Å–∫–∞–∑–∫–∏ + –ø–æ–¥—Å–≤–µ—Ç–∫–∞
  function runSearch() {
    const query = (searchInput.value || '').trim().toLowerCase();
    suggestionsList.innerHTML = '';

    // –ø–æ–¥—Å–∫–∞–∑–∫–∏
    if (query) {
      const filtered = hashtags.filter(tag => tag.toLowerCase().includes(query));
      if (filtered.length) {
        filtered.forEach(tag => {
          const li = document.createElement('li');
          li.textContent = tag;
          li.addEventListener('click', () => {
            searchInput.value = tag;
            suggestionsList.style.display = 'none';
            runSearch(); // —Å—Ä–∞–∑—É –ø—Ä–∏–º–µ–Ω—è–µ–º
          });
          suggestionsList.appendChild(li);
        });
        suggestionsList.style.display = 'block';
      } else {
        suggestionsList.style.display = 'none';
      }
    } else {
      suggestionsList.style.display = 'none';
    }

    // —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –±–ª–æ–∫–æ–≤ –∏ –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Ö—ç—à—Ç–µ–≥–æ–≤
    let found = 0;
    adBlocks.forEach(block => {
      const tagsAttr = (block.dataset.tag || '').trim();
      const tags = tagsAttr ? tagsAttr.split(/\s+/).map(t => t.trim().toLowerCase()) : [];
      const title = block.querySelector('.ad-block__title')?.textContent.toLowerCase() || '';

      const matches = query === '' || tags.some(tag => tag.includes(query)) || title.includes(query);
      block.style.display = matches ? '' : 'none';
      if (matches) found++;

      // –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Ö—ç—à—Ç–µ–≥–æ–≤ –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞
      block.querySelectorAll('.ad-block__hashtag').forEach(h => {
        if (query && h.textContent.toLowerCase().includes(query)) {
          h.classList.add('highlight');
        } else {
          h.classList.remove('highlight');
        }
      });
    });

    // —Å–æ–æ–±—â–µ–Ω–∏–µ "–Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
    if (noResults) {
      noResults.style.display = (found === 0 && query !== '') ? 'block' : 'none';
    }
  }

  // –Ω–∞–≤–µ—à–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
  searchInput.addEventListener('input', runSearch);
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.search-container')) suggestionsList.style.display = 'none';
  });

  // --- –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ñ—É—Ç–µ—Ä–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ---
  function adjustFooterForKeyboard() {
    if (!footer) return;

    // stable viewport (–µ—Å–ª–∏ Telegram –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç) –∏–ª–∏ –ø–æ–ª–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –æ–∫–Ω–∞
    const stable = (tg && typeof tg.viewportStableHeight === 'number' && tg.viewportStableHeight > 0)
      ? tg.viewportStableHeight
      : window.innerHeight;

    // –≤–∏–¥–∏–º–∞—è –≤—ã—Å–æ—Ç–∞: –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º Telegram API, –∑–∞—Ç–µ–º visualViewport, –∑–∞—Ç–µ–º innerHeight
    const visible = (tg && typeof tg.viewportHeight === 'number' && tg.viewportHeight > 0)
      ? tg.viewportHeight
      : (window.visualViewport && window.visualViewport.height) ? window.visualViewport.height : window.innerHeight;

    const keyboardHeight = Math.max(0, stable - visible);

    // –ï—Å–ª–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤–∏–¥–Ω–∞ (keyboardHeight > 0) ‚Äî –ø—Ä—è—á–µ–º —Ñ—É—Ç–µ—Ä –ø–æ–¥ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É,
    // –∏–Ω–∞—á–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ—É—Ç–µ—Ä –Ω–∞ –º–µ—Å—Ç–æ.
    if (keyboardHeight > 0) {
      // –ø–µ—Ä–µ–º–µ—â–∞–µ–º —Ñ—É—Ç–µ—Ä –≤–Ω–∏–∑ (—Å–∫—Ä—ã–≤–∞–µ–º)
      footer.style.transform = `translateY(${keyboardHeight}px)`;
      // —É–º–µ–Ω—å—à–∞–µ–º –ø–∞–¥–¥–∏–Ω–≥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ "–ø–æ–¥–ø—Ä—ã–≥–∏–≤–∞–ª")
      if (main) main.style.paddingBottom = `0px`;
    } else {
      footer.style.transform = '';
      if (main) main.style.paddingBottom = `${footer.offsetHeight}px`;
    }
  }

  // –ø–æ–¥–∫–ª—é—á–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
  if (tg && typeof tg.onEvent === 'function') {
    try { tg.onEvent('viewportChanged', adjustFooterForKeyboard); } catch (e) { /* ignore */ }
  }
  // fallback—ã
  window.addEventListener('resize', adjustFooterForKeyboard);
  if (window.visualViewport) window.visualViewport.addEventListener('resize', adjustFooterForKeyboard);

  // –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ –ø–æ–ª–µ ‚Äî –ø—Ä–æ—Å–∏–º Telegram —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å WebApp –∏ –ø–æ–¥–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª–æ–∂–µ–Ω–∏–µ
  searchInput.addEventListener('focus', () => {
    if (tg && typeof tg.expand === 'function') try { tg.expand(); } catch(e) {}
    // –Ω–µ–±–æ–ª—å—à–æ–π —Ç–∞–π–º–∞—É—Ç ‚Äî —á—Ç–æ–±—ã –±—Ä–∞—É–∑–µ—Ä —É—Å–ø–µ–ª –æ—Ç–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    setTimeout(adjustFooterForKeyboard, 120);
  });
  // –ø—Ä–∏ –±–ª—é—Ä–µ ‚Äî –ø–æ–¥–ø—Ä–∞–≤–ª—è–µ–º
  searchInput.addEventListener('blur', () => setTimeout(adjustFooterForKeyboard, 120));

  // –Ω–∞—á–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞
  setTimeout(() => {
    runSearch();
    adjustFooterForKeyboard();
  }, 80);
});
</script>

  <div id="telegram-messages"></div>


  <script src="telegram.js"></script> 
  <script src="spin.js"></script>
</body>
</html>
